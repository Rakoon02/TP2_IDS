<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TP2</title>
        <link rel="stylesheet" href="../../assets/design.css">
    </head>
    <body>
        <div class="top_bar">
            <a href="../../index.html">
                <b>Pagina Principal</b>
            </a>
            <a href="../index.html">
                <b>Personajes</b>
            </a>
            <a href="../../universos/index.html">
                <b>Universos</b>
            </a>
            <a href="../../localizaciones/index.html">
                <b>Localizaciones</b>
            </a> 
            <a href="../../votar/index.html">
                <b>Votar</b>
            </a>
        </div>
        <div class="mid add_delete_update_subpage" id="add_character">
            <h1>
                <b>Añadir Personaje</b>
            </h1>
            <p>
                *obligatorio
            </p>
            <br>
            <div class="char_inputs">
                <h3>
                    *Nombre del Personaje
                </h3>
                <input type="text" class="name" maxlength="99">
                <br>
                <label for="character_universe"><h3>*Universo del Personaje</h3></label>
                    <select id="characterDropdown"> 
                        <option value="">Seleccione un universo...</option>
                    </select>
                <br>
                <h3>
                    *Poder del Personaje
                </h3>
                <input type="char" class="power">
                <br>
                <h3>
                    *Descripcion del Personaje
                </h3>
                <input type="text" class="description" maxlength="254">
                <br>
                <h3>
                    Imagen del Personaje
                </h3>
                <input type="text" class="image" maxlength="254">
            </div>
            <button onclick="add_char()">Añadir Personaje</button>
        </div>
        <script src="add_char.js"></script>
        <script>
            const universosBackendURL = "http://localhost:3000/api/universos/";
            window.onload = async function() {
                try {
                    const response = await fetch(universosBackendURL);
                    const universos = await response.json();
                    const dropdown = document.getElementById("characterDropdown");

                        universos.forEach(u => {
                        const option = document.createElement("option");
                        option.value = u.id;
                        option.textContent = u.nombre;
                        dropdown.appendChild(option);
                    });
                } catch (error) {
                    console.error("Error cargando universos:", error);
                }
            };
        </script>
    </body>
</html>
