<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TP2</title>
        <link rel="stylesheet" href="../assets/design.css">
    </head>
    <body>
        <div class="top_bar">
            <a href="../index.html">
                <b>Pagina Principal</b>
            </a>
            <a href="../personajes/index.html">
                <b>Personajes</b>
            </a>
            <a href="../universos/index.html">
                <b>Universos</b>
            </a>
            <a href="../localizaciones/index.html">
                <b>Localizaciones</b>
            </a> 
            <a href="../votar/index.html">
                <b>Votar</b>
            </a>
        </div>
        <div class="mid add_delete_update_subpage" id="add_character">
            <h1>
                <b>Actualizar Información de una Localización</b>
            </h1>
            <p>
                *obligatorio
            </p>
            <br>
            <div class="char_inputs">
                <h3>*Selecciona la Localización</h3>
                <select id="lugaresDropdown">
                    <option value="">Seleccione una Localización...</option>
                </select>
                <br>
                <h3>
                    *Nombre de la Localización
                </h3>
                <input type="text" id="name" maxlength="99">
                <br>
                <label for="character_universe"><h3>*Universo de la Localización</h3></label>
                    <select id="universeDropdown">
                        <option value="">Seleccione un universo...</option>
                    </select>
                <br>
                <h3>
                    *Descripcion de la Localización
                </h3>
                <input type="text" id="description" maxlength="254">
                <br>
                <h3>
                    *Tipo de Localización
                </h3>
                <input type="text" id="tipo" maxlength="254">
                <br>
                <h3>
                    *Imagen de la Localización
                </h3>
                <input type="text" id="image" maxlength="254">
            </div>
            <button onclick="actualizar_lugar()">
                Actualizar Información Localización
            </button>
        </div>
        <script src="actualizar_lugar.js"></script>
        <script>
        const lugaresURL = "http://localhost:3000/api/lugares/";
        const universosURL = "http://localhost:3000/api/universos/";

        window.onload = async function() {
            try {
                const lugaresResponse = await fetch(lugaresURL);
                const lugares = await lugaresResponse.json();
                const lugaresDropdown = document.getElementById("lugaresDropdown");

                lugares.forEach(l => {
                    const option = document.createElement("option");
                    option.value = l.id;
                    option.textContent = l.nombre;
                    lugaresDropdown.appendChild(option);
                });

                const universosResponse = await fetch(universosURL);
                const universos = await universosResponse.json();
                const universosDropdown = document.getElementById("universeDropdown");



                universos.forEach(u => {
                    const option = document.createElement("option");
                    option.value = u.id;
                    option.textContent = u.nombre;
                    universosDropdown.appendChild(option);
                });

            } catch (error) {
                console.error("Error cargando datos:", error);
            }
        };
        </script>
    </body>
</html>
